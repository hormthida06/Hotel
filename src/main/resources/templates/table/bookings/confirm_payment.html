<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Confirm Your Reservation – Sabbay Kep</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"/>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <link rel="stylesheet" th:href="@{/css/confirm_payment.css}">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

<!-- Navbar -->
<th:block th:replace="layout/header.html :: header"></th:block>

<!-- Header -->
<section class="confirm-header mt-5 pt-5">
    <div class="container">
        <h1 class="display-4 fw-bold mb-3">Confirm Your Reservation</h1>
        <p class="lead fs-4">Almost there! Review details and choose payment method</p>
    </div>
</section>

<!-- Main Content -->
<main class="container my-5 mt-5 pt-5">

    <div class="row g-5">
        <!-- Left: Summary -->
        <div class="col-lg-5">
            <div class="summary-card card p-4 p-md-5">
                <h3 class="fw-bold mb-4 text-center">
                    <i class="fas fa-clipboard-check me-2 text-success"></i>Reservation Summary
                </h3>

                <!-- Dates -->
                <div class="mb-4">
                    <h5><i class="fas fa-calendar-days me-2 text-primary"></i>Dates</h5>

                    <p class="mb-1">
                        Check-in:
                        <strong th:text="${#temporals.format(booking.checkIn, 'MMMM dd, yyyy')}">
                            Feb 15, 2026
                        </strong>
                    </p>

                    <p>
                        Check-out:
                        <strong th:text="${#temporals.format(booking.checkOut, 'MMMM dd, yyyy')}">
                            Feb 18, 2026
                        </strong>
                        (<span th:text="${nights}">3</span> nights)
                    </p>
                </div>

                <!-- Room & Guests -->
                <div class="mb-4">
                    <h5><i class="fas fa-bed me-2 text-primary"></i>Room & Guests</h5>
                    <p class="mb-1" th:text="${room.type}">
                        Garden View Bungalow
                    </p>
                    <p>
                        <span >2</span> adults •
                        <span >1</span> child •
                        <span >
                            Breakfast included
                        </span>
                    </p>
<!--                    <p>-->
<!--                        <span th:text="${room.adults}">2</span> adults •-->
<!--                        <span th:text="${room.children}">1</span> child •-->
<!--                        <span th:text="${room.breakfastIncluded ? 'Breakfast included' : 'No breakfast'}">-->
<!--                            Breakfast included-->
<!--                        </span>-->
<!--                    </p>-->
                </div>

                <!-- Guest (if user logged in) -->
                <div class="mb-4" th:if="${user != null}">
                    <h5><i class="fas fa-user me-2 text-primary"></i>Guest</h5>
                    <p>
                        <span th:text="${user.fullName}">Thida</span> •
                        <span th:text="${user.email}">thida@example.com</span>
                    </p>
                </div>

                <hr class="my-4">

                <!-- Total Amount -->
                <div class="d-flex justify-content-between align-items-center">
                    <h4 class="mb-0">Total Amount</h4>
                    <h3 class="fw-bold text-success mb-0"
                        th:text="'$' + ${booking.totalPrice}">
                        $285.00
                    </h3>
                </div>
                <p class="text-muted small text-end">(including taxes & fees)</p>
            </div>
        </div>

        <!-- Right: Payment Selection -->
        <div class="col-lg-7">
            <div class="payment-card card p-4 p-md-5">
                <h3 class="fw-bold mb-4 text-center"><i class="fas fa-credit-card me-2 text-primary"></i>Choose Payment Method</h3>

                <form th:action="@{/booking/khqr/{bookingId}(bookingId=${booking.id})}" method="GET">
                    <input type="hidden" name="paymentType" id="paymentType" value="KHQR">

                    <!-- KHQR Option -->
                    <div class="payment-option active" id="khqr-option" onclick="selectPayment('KHQR')">
                        <div class="d-flex align-items-center mb-3">
                            <i class="fas fa-qrcode fa-2x me-3 text-primary"></i>
                            <div>
                                <h5 class="mb-1">Pay with KHQR (Recommended in Cambodia)</h5>
                                <p class="text-muted small mb-0">Instant • No fee • Use Bakong, ABA, ACLEDA, Wing, etc.</p>
                            </div>
                            <div class="qr-placeholder">
                                <img th:src="@{/img/photos/khqr-5.png}" alt="KHQR Code" class="img-fluid">
                            </div>
                        </div>
                    </div>

                    <!-- PayPal Option -->
                    <div class="payment-option" id="paypal-option" onclick="selectPayment('PayPal')">
                        <div class="d-flex align-items-center mb-3">
                            <i class="fab fa-paypal fa-2x me-3 text-primary"></i>
                            <div>
                                <h5 class="mb-1">Pay with PayPal</h5>
                                <p class="text-muted small mb-0">Secure • International cards • For guests abroad</p>
                            </div>
                        </div>
                    </div>

                    <hr class="my-4">

                    <div class="text-center">
                        <button type="submit" class="btn btn-primary btn-lg px-5 py-3" id="confirm-btn">
                            <i class="fas fa-lock me-2"></i>Confirm & Proceed to Payment
                        </button>
                    </div>
                </form>

            </div>
        </div>
    </div>

</main>

<!-- Footer -->
<th:block th:replace="layout/footer.html :: footer"></th:block>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<script>
    function selectPayment(type) {
        // set hidden input
        document.getElementById('paymentType').value = type;

        // toggle active class
        document.getElementById('khqr-option').classList.remove('active');
        document.getElementById('paypal-option').classList.remove('active');

        if(type === 'KHQR') {
            document.getElementById('khqr-option').classList.add('active');
        } else {
            document.getElementById('paypal-option').classList.add('active');
        }
    }
</script>


</body>
</html>